- defaults:
    link:
        relink: true
        force: true

- clean: ['~']

- shell:
    - if [[ ! -d ~/.config ]]; then mkdir ~/.config; fi
    - if [[ ! -d ~/.config/kitty ]]; then mkdir ~/.config/kitty; fi
    - if [[ ! -d ~/.config/nixpkgs ]]; then mkdir ~/.config/nixpkgs; fi
    - if [[ ! -f zshrc_local ]]; then touch zshrc_local; fi
    - if [[ ! -f proxy_url ]]; then touch proxy_url; echo "proxy_url=" > proxy_url; fi
    - if [[ ! -f ~/.gitignore ]]; then git config --global core.excludesFile ~/.gitignore; fi
    - if [[ ! -f home.nix ]]; then cp _home.nix home.nix; fi
    - sed -i "s/SUBSTITUTE/${USER}/" home.nix

- link:
    ~/.zshrc: zshrc
    ~/.zshrc_local: zshrc_local
    ~/.blerc: blerc
    ~/.aliases: aliases
    ~/.bashrc: bashrc
    ~/.theme.sh: theme.sh
    ~/.p10k.zsh: p10k.zsh
    ~/.proxy_url: proxy_url
    ~/.proxy_configurer: proxy_configurer
    ~/.ideavimrc: ideavimrc
    ~/.tmux.conf: tmux.conf
    ~/.config/flake8: flake8
    ~/.config/karabiner: karabiner
    ~/.vim: vim
    ~/.gitignore: gitignore
    ~/.config/kitty/kitty.conf: kitty.conf
    ~/.config/kitty/kitty-theme.conf: kitty-theme.conf
    ~/.config/nvim: nvim
    ~/.config/nixpkgs/home.nix: home.nix
    ~/.config/nixpkgs/common.nix: common.nix

- shell:
    - [git submodule update --init --recursive, Installing submodules]
